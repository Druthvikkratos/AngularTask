<div class="register-form">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label>Name</label>
      <input
        type="text"
        formControlName="name"
        class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f['name'].errors }"
        [(ngModel)]="formData.name"
      />
      <div *ngIf="submitted && f['name'].errors" class="invalid-feedback">
        <div *ngIf="f['name'].errors['required']">name is required</div>
      </div>
    </div>

    <div class="form-group">
      <label>Address</label>
      <input
        type="text"
        formControlName="address"
        class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f['address'].errors }"
        [(ngModel)]="formData.address"
      />
      <div *ngIf="submitted && f['address'].errors" class="invalid-feedback">
        <div *ngIf="f['address'].errors['required']">Address is required</div>
      </div>
    </div>

    <div class="form-group">
      <label>Email</label>
      <input
        type="text"
        formControlName="email"
        class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f['email'].errors }"
        [(ngModel)]="formData.email"
      />
      <div *ngIf="submitted && f['email'].errors" class="invalid-feedback">
        <div *ngIf="f['email'].errors['required']">Email is required</div>
        <div *ngIf="f['email'].errors['email']">Email is invalid</div>
      </div>
    </div>

    <div class="form-group">
      <label>Phone No.</label>
      <input
        type="number"
        formControlName="phone"
        class="form-control"
        minlength="10"
        maxlength="10"
        [ngClass]="{ 'is-invalid': submitted && f['phone'].errors }"
        [(ngModel)]="formData.phone"
      />
      <div *ngIf="submitted && f['phone'].errors" class="invalid-feedback">
        <div *ngIf="f['phone'].errors['required']">Phone is required</div>
        <div *ngIf="f['phone'].errors['pattern']">
          Please, Enter 10 digit Mobile Number.
        </div>
      </div>
    </div>

    <div class="form-group">
      <label>Gender.</label>
      <select
        class="custom-select"
        (change)="changeGender($event)"
        formControlName="gender"
        [ngClass]="{ 'is-invalid': submitted && f['gender'].errors }"
        [(ngModel)]="formData.gender"
      >
        <option value="">Choose gender</option>
        <option *ngFor="let gen of gender" [ngValue]="gen">{{ gen }}</option>
      </select>
      <div *ngIf="submitted && f['gender'].errors" class="invalid-feedback">
        <div *ngIf="f['gender'].errors['required']">Gender is required</div>
      </div>
    </div>

    <div class="form-group">
      <button type="submit" class="btn btn-primary">
        {{ editData ? 'Update' : 'Submit' }}
      </button>
      <button
        type="button"
        (click)="onReset()"
        class="btn btn-warning float-right"
      >
        Reset
      </button>
    </div>
  </form>
</div>

<div>
  <table class="table">
    <thead class="thead-dark">
      <tr>
        <th class="sticky">Name</th>
        <th class="sticky">Address</th>
        <th class="sticky">Email</th>
        <th class="sticky">Phone No.</th>
        <th class="sticky">Gender</th>
        <th class="sticky">Edit</th>
      </tr>
    </thead>
    <tbody class="my-table body">
      <tr *ngFor="let data of submittedData; let i = index">
        <td>{{ data.name }}</td>
        <td>{{ data.address }}</td>
        <td>{{ data.email }}</td>
        <td>{{ data.phone }}</td>
        <td>{{ data.gender }}</td>
        <td>
          <button class="btn btn-secondary" (click)="editSavedData(i)">
            Edit
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
